<!doctype html>
<html>
	<head>
		<title>Main Door dashboard</title>		
        <meta name="viewport" content="width=device-width, initial-scale=1">
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
		<link href="/css/main.css" rel="stylesheet">
		<link href="/css/jqbtk.min.css" rel="stylesheet">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.2.0/socket.io.min.js"></script>
	</head>

	<body>
		<script type="text/javascript">
			document.addEventListener("DOMContentLoaded", function() {
				
				const socket = io.connect('http://127.0.0.1:5050');
				socket.on('connect', function() {
					console.log('User has connected!');
					socket.emit('server');
				});

				const user_name_element = document.getElementById("user_name")
				const age_element = document.getElementById("user_age")
				const access_level_element = document.getElementById("access_level")
				const pin_code_element = document.getElementById("user_pin_code")

				socket.on('update_dashboard_1', function(msg) {
					user_name_element.innerHTML = `Name: ${msg['current_name']}`;
					age_element.innerHTML = `Age: ${msg['age']}`;
					access_level_element.innerHTML = `Access level: ${msg['access_level']}`;
					pin_code_element.innerHTML = `Pin code: ${msg['pin_code']}`;
				});
			});
		</script>
		
		<main role="main">
			<div class="container" id="dashboard-container">

				<div class="row" id="door-row">
					<div class="col-6 __bordered">
						<h2>pin_code_form></h2>
						<p><input type="tel" class="keyboard form-control" id="telephone-keypad-demo"></p>
						<script>
							$(function(){
								$('#telephone-keypad-demo').keyboard();
							});
						</script>
					</div>
					<div class="col-6 __bordered __mainblock exmp3" id="camera_feed">
						<img id="img" src = "{{ url_for('video_feed') }}">
					</div>
				</div>

				<div class="row">
					<div class="col-6 __bordered">
						<h2>Some dashboard 1></h2>
						<div id="dashboard1_feed">
							<ul id="dashboard_info">
								<p>Now on camera:</p>
								<li id="user_name"></li>
								<li id="user_age"></li>
								<li id="access_level"></li>
								<li id="user_pin_code"></li>
							</ul>
						</div>
					</div>
					<div class="col-6 __bordered">
						<h2>Some dashboard 2</h2>
                        <div id="dashboard2_feed"></div>
					</div>
				</div>
			</div>
		</main>
		<!-- JavaScript Bundle with Popper -->
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa" crossorigin="anonymous"></script>
		<script src="/js/jqbtk.min.js"></script>
	</body>
</html>

